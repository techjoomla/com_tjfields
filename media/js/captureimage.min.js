var userAgentIsMobile=!1,userAgentIsAndroid=!1,subFormFieldCount=0,cameraFacingMode="user";function take_snapshot(e){Webcam.snap(function(t){document.getElementById(e+"_capture_img").style="display:none",jQuery("#"+e+"_captured_img").attr("style","width:"+document.getElementById(e+"__camera_width").value+"px;height:"+document.getElementById(e+"__camera_height").value+"px;"),jQuery("#"+e+"_captured_img").find("img").attr("src",t),jQuery("#"+e).val(jQuery("#"+e+"_captured_img").find("img").attr("src")).trigger("change"),document.getElementById(e+"_take_snapshot").style="display:none;",document.getElementById(e+"_switch_camera").style="display:none;",document.getElementById(e+"_take_another").style=""})}function use_snapshot(e){Webcam.snap(function(t){document.getElementById(e+"_capture_img").style="display:none",jQuery("#"+e+"_captured_img").attr("style","width:"+document.getElementById(e+"__camera_width").value+"px;height:"+document.getElementById(e+"__camera_height").value+"px;"),jQuery("#"+e+"_captured_img").find("img").attr("src",t),Webcam.reset(),userAgentIsMobile&&(document.getElementById(e+"_use").style="display:none;"),jQuery("#"+e).val(jQuery("#"+e+"_captured_img").find("img").attr("src")).trigger("change"),document.getElementById(e+"_take_snapshot").style="display:none;",document.getElementById(e+"_switch_camera").style="display:none;",document.getElementById(e+"_take_another").style=""})}function set_camera(e){e=e.replace("X__",subFormFieldCount+"__"),document.getElementById(e+"_capture_img").style="",document.getElementById(e+"_captured_img").src="",jQuery("#"+e+"_captured_img").find("img").attr("src",""),document.getElementById(e+"_captured_img").style="display:none",document.getElementById(e+"_take_another").style="display:none;",document.getElementById(e+"_take_snapshot").style="",document.getElementById(e+"_use").style="display:none;",userAgentIsMobile&&(document.getElementById(e+"_take_snapshot").style="display:none;",document.getElementById(e+"_use").style=""),userAgentIsAndroid&&(document.getElementById(e+"_switch_camera").style=""),Webcam.set({width:document.getElementById(e+"__camera_width").value,height:document.getElementById(e+"__camera_height").value,dest_width:2*document.getElementById(e+"__camera_width").value,dest_height:2*document.getElementById(e+"__camera_height").value,flip_horiz:!0,image_format:"jpeg",jpeg_quality:100}),Webcam.attach("#"+e+"_capture_img")}function switch_camera(e){userAgentIsAndroid&&(cameraFacingMode="user"==cameraFacingMode?"environment":"user",Webcam.reset(),Webcam.set({width:document.getElementById(e+"__camera_width").value,height:document.getElementById(e+"__camera_height").value,dest_width:2*document.getElementById(e+"__camera_width").value,dest_height:2*document.getElementById(e+"__camera_height").value,flip_horiz:!0,image_format:"jpeg",jpeg_quality:100,constraints:{facingMode:cameraFacingMode}}),Webcam.attach("#"+e+"_capture_img"))}jQuery(document).ready(function(){var e=navigator.userAgent||navigator.vendor||window.opera;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)&&(userAgentIsMobile=!0),/android/i.test(e)&&(userAgentIsAndroid=!0),jQuery.each(jQuery(document).find(jQuery("input[onClick^='set_camera(']")),function(e,t){"0"==jQuery("#"+jQuery(t).attr("id").replace("take_another","_hasvalue")).val()&&jQuery(t).click()}),jQuery.each(jQuery(document).find(jQuery("input[onClick^='take_snapshot(']")),function(e,t){userAgentIsMobile&&(document.getElementById(jQuery(t).attr("id")).style="display:none;")}),jQuery.each(jQuery(document).find(jQuery("input[onClick^='switch_camera(']")),function(e,t){!1===userAgentIsAndroid&&(document.getElementById(jQuery(t).attr("id")).style="display:none;")}),jQuery(document).on("subform-row-add",function(e,t){subFormFieldCount=jQuery(t).attr("data-group").replace(jQuery(t).attr("data-base-name"),"");var n="jform_"+jQuery(t).attr("data-base-name")+"__"+jQuery(t).attr("data-group").substring(0,jQuery(t).attr("data-group").length-7);jQuery.each(jQuery(t).find(jQuery("input[id^='"+n+"']")),function(e,t){jQuery(t).attr("id",jQuery(t).attr("id").replace("X__",subFormFieldCount+"__"))}),jQuery.each(jQuery(t).find(jQuery("div[id^='"+n+"']")),function(e,t){jQuery(t).attr("id",jQuery(t).attr("id").replace("X__",subFormFieldCount+"__"))}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='set_camera(']")),function(e,t){"0"==jQuery("#"+jQuery(t).attr("id").replace("take_another","_hasvalue")).val()&&jQuery(t).click()}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='set_camera(']")),function(e,t){jQuery(t).attr("onClick",jQuery(t).attr("onClick").replace("X__",subFormFieldCount+"__"))}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='take_snapshot(']")),function(e,t){jQuery(t).attr("onClick",jQuery(t).attr("onClick").replace("X__",subFormFieldCount+"__"))}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='switch_camera(']")),function(e,t){jQuery(t).attr("onClick",jQuery(t).attr("onClick").replace("X__",subFormFieldCount+"__")),0==userAgentIsAndroid&&(document.getElementById(jQuery(t).attr("id")).style="display:none;")}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='switch_camera(']")),function(e,t){jQuery(t).attr("onClick",jQuery(t).attr("onClick").replace("X__",subFormFieldCount+"__"))}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='use_snapshot(']")),function(e,t){jQuery(t).attr("onClick",jQuery(t).attr("onClick").replace("X__",subFormFieldCount+"__"))}),jQuery.each(jQuery(t).find(jQuery("input[onClick^='take_snapshot(']")),function(e,t){userAgentIsMobile&&(document.getElementById(jQuery(t).attr("id")).style="display:none;")})})});